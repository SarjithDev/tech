<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register - Jith-tech Solutions</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script>
        // Define custom Tailwind colors/fonts in the config block
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        // Cyberpunk/Neon Palette
                        'bg-cyber': '#08001a',       // Ultra deep dark purple/black
                        'card-cyber': '#10002b',     // Slightly lighter dark card base
                        'neon-primary': '#00e0ff',   // Electric Cyan/Blue
                        'neon-secondary': '#ff00a0', // Neon Pink/Magenta
                        'neon-accent': '#6f00ff',    // Deep Violet for gradients
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        heading: ['Lexend', 'sans-serif'],
                    },
                    boxShadow: {
                        // Neon Glow effect
                        'neon-glow': '0 0 15px rgba(0, 224, 255, 0.5), 0 0 5px rgba(255, 0, 160, 0.2)',
                    }
                }
            }
        }
    </script>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Lexend:wght=700;800;900&display=swap" rel="stylesheet">
    
    <style>
        /* Custom styles for the Cyber-Tech theme */
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--tw-color-bg-cyber); 
            
            /* --- NEW BACKGROUND IMAGE STYLE --- */
            background-image: url('https://getwallpapers.com/wallpaper/full/6/5/4/1420574-hacker-background-1920x1080-laptop.jpg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            position: relative;
            
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            color: #e0e7ff; /* Light, cool text */
        }

        /* Overlay to darken the background image and maintain high contrast */
        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            /* Deep black/purple overlay */
            background: rgba(0, 0, 0, 0.75); 
            z-index: 1; 
        }

        /* Ensure content and form are above the overlay */
        .auth-container {
            z-index: 10;
            position: relative;
        }

        /* Input Field Styling */
        .cyber-input {
            background-color: #00000080; /* Transparent Black */
            color: #ffffff; 
            border: 1px solid #ffffff30; /* Very subtle white border */
            transition: all 0.2s ease;
        }
        .cyber-input::placeholder {
            color: #9ca3af; /* Gray placeholder */
        }
        .cyber-input:focus {
            outline: none;
            border-color: var(--tw-color-neon-primary); /* Neon blue border */
            box-shadow: 0 0 0 2px var(--tw-color-neon-primary); /* Neon ring */
        }
        
        /* Button Gradient (Used for Sign Up) */
        .btn-neon-gradient {
            /* Neon Gradient from Violet/Pink to Cyan */
            background-image: linear-gradient(to right, var(--tw-color-neon-secondary) 0%, var(--tw-color-neon-primary) 100%); 
            transition: all 0.3s ease;
        }
        .btn-neon-gradient:hover {
            /* Shift gradient and apply stronger shadow */
            background-image: linear-gradient(to right, var(--tw-color-neon-accent) 0%, var(--tw-color-neon-secondary) 100%);
            box-shadow: 0 0 10px var(--tw-color-neon-primary), 0 0 5px var(--tw-color-neon-secondary);
            transform: translateY(-2px);
        }

        .error-message { 
            color: var(--tw-color-neon-secondary); /* Neon Pink error */ 
            font-weight: 700;
            text-shadow: 0 0 5px rgba(255, 0, 160, 0.5); /* Subtle glow on error */
        }
    </style>
</head>
<body>

    <div class="auth-container max-w-md w-full mx-auto px-4 sm:px-6 lg:px-8 py-12">
        <div class="text-center mb-10">
            <a href="index.html" class="inline-flex items-center space-x-3 group">
                <svg class="h-10 w-10 text-neon-primary drop-shadow-lg" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path>
                </svg>
                <span class="text-4xl font-extrabold text-white font-heading tracking-tight drop-shadow-md">Jith-tech</span>
            </a>
            <h2 class="mt-8 text-3xl font-extrabold text-neon-primary font-heading uppercase text-shadow-sm" style="text-shadow: 0 0 10px rgba(0, 224, 255, 0.4);">
                // ACCESS REQUIRED
            </h2>
            <p class="mt-3 text-base text-gray-400">
                Authorized personnel log in: 
                <a href="login.html" class="font-semibold text-neon-secondary hover:text-white transition duration-150 underline-offset-4 hover:underline">
                    [SIGN IN]
                </a>
            </p>
        </div>

        <div class="p-10 rounded-xl shadow-neon-glow bg-card-cyber/80 backdrop-blur-sm border border-neon-primary/30">
            <form id="registerForm" class="space-y-6" method="POST">
                
                <div>
                    <label for="full-name" class="block text-sm font-bold text-neon-primary mb-1 tracking-widest">FULL NAME</label>
                    <div class="mt-1">
                        <input id="full-name" name="full-name" type="text" autocomplete="name" required
                            placeholder="e.g., Kaito_User_01"
                            class="cyber-input block w-full px-4 py-3 rounded-lg text-base">
                    </div>
                </div>

                <div>
                    <label for="reg-email" class="block text-sm font-bold text-neon-primary mb-1 tracking-widest">EMAIL ADDRESS</label>
                    <div class="mt-1">
                        <input id="reg-email" name="email" type="email" autocomplete="email" required
                            placeholder="user@datacore.net"
                            class="cyber-input block w-full px-4 py-3 rounded-lg text-base">
                    </div>
                </div>

                <div>
                    <label for="reg-password" class="block text-sm font-bold text-neon-primary mb-1 tracking-widest">PASSWORD</label>
                    <div class="mt-1 relative">
                        <input id="reg-password" name="password" type="password" autocomplete="new-password" required
                            placeholder="SECURITY LEVEL 6+"
                            class="cyber-input block w-full pr-12 px-4 py-3 rounded-lg text-base">
                        
                        <svg id="password-toggle" class="absolute right-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-500 cursor-pointer hover:text-neon-primary transition duration-150"
                            xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path id="eye-path" stroke-linecap="round" stroke-linejoin="round" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.66 0-8.647-2.922-10-7 1.353-4.078 5.34-7 10-7 1.258 0 2.482.203 3.625.575M17.5 14.5a3 3 0 11-6 0 3 3 0 016 0z" /> 
                            <path id="dot-path" stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                            <path id="slash-path" stroke-linecap="round" stroke-linejoin="round" d="M19.5 4.5l-15 15" class="opacity-100" />
                        </svg>
                    </div>
                </div>

                <div id="error-message" class="error-message hidden pt-2 text-center"></div>
                
                <div class="flex items-start pt-2">
                    <div class="flex items-center">
                        <input id="terms-agree" name="terms-agree" type="checkbox" class="h-4 w-4 text-neon-primary border-gray-600 rounded-sm focus:ring-neon-primary bg-card-cyber" required>
                    </div>
                    <label for="terms-agree" class="ml-2 block text-sm text-gray-400">
                        I accept the 
                        <a href="#" class="font-bold text-neon-primary hover:text-white transition duration-150">
                            DATA PROTOCOLS
                        </a>
                    </label>
                </div>

                <div class="pt-2">
                    <button type="submit"
                        class="w-full flex justify-center py-3.5 px-4 border border-transparent rounded-lg shadow-md text-lg font-bold text-white btn-neon-gradient uppercase active:scale-[0.98] transition duration-150">
                        // INITIATE REGISTRATION
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script type="module">
        // Import the functions you need from the SDKs
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
        import { getAuth, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-auth.js";
        
        // Firebase configuration (Keep as is)
        const firebaseConfig = {
            apiKey: "AIzaSyB0c89IeqVrz8aJ9BMX6eLQh6tmrLwdD_E",
            authDomain: "myweb-336bd.firebaseapp.com",
            projectId: "myweb-336bd",
            storageBucket: "myweb-336bd.firebasestorage.app",
            messagingSenderId: "720945527691",
            appId: "1:720945527691:web:865c08bf46f7562963cd8e"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        
        const errorMessageElement = document.getElementById('error-message');

        // Handle form submission
        const registerForm = document.getElementById('registerForm');
        
        registerForm.addEventListener('submit', (e) => {
            e.preventDefault();
            errorMessageElement.classList.add('hidden'); // Clear previous errors
            
            const fullName = document.getElementById('full-name').value;
            const email = document.getElementById('reg-email').value;
            const password = document.getElementById('reg-password').value;

            // Simple validation check for full name (Firebase handles email/password)
            if (fullName.trim().length < 2) {
                errorMessageElement.textContent = '‚ö†Ô∏è DATA_ERROR: Please enter your full designation.';
                errorMessageElement.classList.remove('hidden');
                return;
            }

            // Create new user with email and password
            createUserWithEmailAndPassword(auth, email, password)
                .then((userCredential) => {
                    const user = userCredential.user;
                    console.log('User registered:', user.email);
                    
                    // You might want to update user profile with fullName here using updateProfile(auth.currentUser, { displayName: fullName });
                    
                    alert('Registration successful! Redirecting to login...');
                    window.location.href = "login.html"; // Redirect to login page
                })
                .catch((error) => {
                    const errorCode = error.code;
                    errorMessageElement.textContent = getErrorMessage(errorCode);
                    errorMessageElement.classList.remove('hidden');
                });
        });

        // Toggle password visibility 
        const passwordField = document.getElementById('reg-password');
        const passwordToggleIcon = document.getElementById('password-toggle');
        const eyePath = document.getElementById('eye-path');
        const slashPath = document.getElementById('slash-path');
        
        // Original paths for closed eye (eye with slash)
        const closedEyePathD = "M13.875 18.825A10.05 10.05 0 0112 19c-4.66 0-8.647-2.922-10-7 1.353-4.078 5.34-7 10-7 1.258 0 2.482.203 3.625.575M17.5 14.5a3 3 0 11-6 0 3 3 0 016 0z";
        
        // Paths for open eye (no slash)
        const openEyePathD = "M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7z";
        
        // Set initial state correctly
        eyePath.setAttribute("d", closedEyePathD);
        slashPath.classList.add('opacity-100');
        passwordToggleIcon.classList.add('text-gray-500');

        passwordToggleIcon.addEventListener('click', function () {
            if (passwordField.type === "password") {
                // Change to text (Show password - Open eye)
                passwordField.type = "text";
                eyePath.setAttribute("d", openEyePathD); // Full open eye shape
                slashPath.classList.add('opacity-0'); // Hide the slash
                slashPath.classList.remove('opacity-100');
                passwordToggleIcon.classList.remove('text-gray-500');
                passwordToggleIcon.classList.add('text-neon-primary'); // Change icon color to neon
            } else {
                // Change to password (Hide password - Closed eye with slash)
                passwordField.type = "password";
                eyePath.setAttribute("d", closedEyePathD); // Restore closed eye path
                slashPath.classList.remove('opacity-0'); // Show the slash
                slashPath.classList.add('opacity-100');
                passwordToggleIcon.classList.remove('text-neon-primary');
                passwordToggleIcon.classList.add('text-gray-500'); // Reset icon color to gray
            }
        });


        // Function to return user-friendly error messages based on Firebase error codes
        function getErrorMessage(errorCode) {
            switch (errorCode) {
                case 'auth/email-already-in-use':
                    return '‚ùå CONFLICT: Email already exists in the main frame. Access denied.';
                case 'auth/invalid-email':
                    return '‚ö†Ô∏è PROTOCOL_VIOLATION: Invalid email format detected. Check input.';
                case 'auth/weak-password':
                    return 'üîê WARNING: Access code too weak. Must be 6 characters or longer.';
                default:
                    return 'üö® UNKNOWN_ERROR: An unexpected data breach occurred. Retry process.';
            }
        }
    </script>

</body>
</html>
